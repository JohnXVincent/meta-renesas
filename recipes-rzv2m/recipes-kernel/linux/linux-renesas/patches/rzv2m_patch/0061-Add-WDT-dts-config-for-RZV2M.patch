From 8267591c82985c46e3360831f808351cc257f6bf Mon Sep 17 00:00:00 2001
From: nhatthieu <nhat.thieu.xr@renesas.com>
Date: Tue, 19 Apr 2022 14:16:55 +0700
Subject: [PATCH] Add-WDT-dts-config-for-RZV2M

Signed-off-by: nhatthieu <nhat.thieu.xr@renesas.com>
---
 .../renesas/r9a09g011gbg-evaluation-board.dts  |  6 ++++++
 arch/arm64/boot/dts/renesas/r9a09g011gbg.dtsi  | 18 +++++++++++++++++-
 arch/arm64/configs/defconfig                   |  1 +
 3 files changed, 24 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/renesas/r9a09g011gbg-evaluation-board.dts b/arch/arm64/boot/dts/renesas/r9a09g011gbg-evaluation-board.dts
index 56e3111aaa8d..46797633706f 100644
--- a/arch/arm64/boot/dts/renesas/r9a09g011gbg-evaluation-board.dts
+++ b/arch/arm64/boot/dts/renesas/r9a09g011gbg-evaluation-board.dts
@@ -112,6 +112,12 @@ &extal_clk {
     clock-frequency = <48000000>;
 };
 
+/* used watch dog timer */
+&wdt0 {
+	status = "okay";
+	timeout-sec = <60>;
+};
+
 &xhci0 {
        status = "okay";
 };
diff --git a/arch/arm64/boot/dts/renesas/r9a09g011gbg.dtsi b/arch/arm64/boot/dts/renesas/r9a09g011gbg.dtsi
index 0000ad0157e2..37c1b5ba0ef3 100644
--- a/arch/arm64/boot/dts/renesas/r9a09g011gbg.dtsi
+++ b/arch/arm64/boot/dts/renesas/r9a09g011gbg.dtsi
@@ -114,7 +114,23 @@ soc: soc {
         #address-cells = <2>;
         #size-cells = <2>;
         ranges;
-
+	
+       /* used watch dog timer */
+       wdt0: watchdog@a4050000 {
+              compatible = "renesas,rzv2m-wdt";
+              reg = <0 0xa4050000 0 0x80>;
+              clocks = <&pclk>,<&wdt_clk>;
+              interrupts = <GIC_SPI 043 IRQ_TYPE_LEVEL_HIGH>;
+              status = "disabled";
+       };
+       wdt1: watchdog@a4050080 {
+              compatible = "renesas,rzv2m-wdt";
+              reg = <0 0xa4050080 0 0x80>;
+              clocks = <&pclk>,<&wdt_clk>;
+              interrupts = <GIC_SPI 044 IRQ_TYPE_LEVEL_HIGH>;
+              status = "disabled";
+       };
+       
        pfc: pin-controller@B6250000 {
             compatible = "renesas,pfc-r8arzv2m";
             reg = <0 0xB6250000 0 0x1000>;
diff --git a/arch/arm64/configs/defconfig b/arch/arm64/configs/defconfig
index 56eaca523c2a..45a49a8c613a 100644
--- a/arch/arm64/configs/defconfig
+++ b/arch/arm64/configs/defconfig
@@ -188,6 +188,7 @@ CONFIG_RCAR_GEN3_THERMAL=y
 CONFIG_RCAR_THERMAL_EMS_ENABLED=y
 CONFIG_WATCHDOG=y
 CONFIG_RENESAS_WDT=y
+CONFIG_RENESAS_RZV2M_WDT=y
 CONFIG_RENESAS_RZG2LWDT=y
 CONFIG_RENESAS_OSTM=y
 CONFIG_MFD_BD9571MWV=y
-- 
2.25.1

