From 63e48e33f7a6e15e11da7fa2940cf19bc87bf5e3 Mon Sep 17 00:00:00 2001
From: Hao Bui <hao.bui.yg@renesas.com>
Date: Wed, 14 Apr 2021 14:34:59 +0700
Subject: [PATCH 348/441] drm: rcar-du: Enable rendering througth VSP device on
 R8A7742

Enable rendering through VSP on the R8A7742 (RZ/G1H) platform.

Signed-off-by: Hao Bui <hao.bui.yg@renesas.com>
---
 drivers/gpu/drm/rcar-du/rcar_du_drv.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/rcar-du/rcar_du_drv.c b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
index dce9dc5..6a601a6 100644
--- a/drivers/gpu/drm/rcar-du/rcar_du_drv.c
+++ b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
@@ -38,9 +38,11 @@
 static const struct rcar_du_device_info rcar_du_r8a7742_info = {
 	.gen = 2,
 	.features = RCAR_DU_FEATURE_CRTC_IRQ_CLOCK
-		  | RCAR_DU_FEATURE_EXT_CTRL_REGS,
+		  | RCAR_DU_FEATURE_EXT_CTRL_REGS
+		  | RCAR_DU_FEATURE_VSP1_SOURCE,
 	.quirks = RCAR_DU_QUIRK_ALIGN_128B,
 	.num_crtcs = 3,
+	.vspd_crtcs = BIT(0) | BIT(1),
 	.routes = {
 		/* R8A7742 has one RGB output and two LVDS outputs. */
 		[RCAR_DU_OUTPUT_DPAD0] = {
-- 
2.7.4

