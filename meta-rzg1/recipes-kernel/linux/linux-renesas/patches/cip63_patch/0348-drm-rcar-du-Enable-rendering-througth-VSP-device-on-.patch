From 572a4838abbdf2d94134905edf2102fe670304c2 Mon Sep 17 00:00:00 2001
From: Duy Dang <duy.dang.yb@renesas.com>
Date: Thu, 29 Oct 2020 19:36:33 +0700
Subject: [PATCH 348/442] drm: rcar-du: Enable rendering througth VSP device on
 R8A77470

Enable rendering through VSP on the R8A77470 (RZ/G1C) platform.

Signed-off-by: Duy Dang <duy.dang.yb@renesas.com>
Signed-off-by: Hao Bui <hao.bui.yg@renesas.com>
---
 drivers/gpu/drm/rcar-du/rcar_du_drv.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/rcar-du/rcar_du_drv.c b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
index 2f664e6..dce9dc5 100644
--- a/drivers/gpu/drm/rcar-du/rcar_du_drv.c
+++ b/drivers/gpu/drm/rcar-du/rcar_du_drv.c
@@ -115,8 +115,10 @@ static const struct rcar_du_device_info rzg1_du_r8a7745_info = {
 static const struct rcar_du_device_info rcar_du_r8a77470_info = {
 	.gen = 2,
 	.features = RCAR_DU_FEATURE_CRTC_IRQ_CLOCK
-				| RCAR_DU_FEATURE_EXT_CTRL_REGS,
+				| RCAR_DU_FEATURE_EXT_CTRL_REGS
+				| RCAR_DU_FEATURE_VSP1_SOURCE,
 	.num_crtcs = 1,
+	.vspd_crtcs = BIT(0),
 	.routes = {
 		/* R8A77470 has two RGB outputs, one LVDS output, and
 		*  one (currently unsupported) analog video output
-- 
2.7.4

