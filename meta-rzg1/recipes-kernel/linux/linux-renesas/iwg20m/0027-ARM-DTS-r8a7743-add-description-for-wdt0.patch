From 5679a3b0898b920a90c4fa83e614e4e02b5431d7 Mon Sep 17 00:00:00 2001
From: Binh Nguyen <binh.nguyen.uw@rvc.renesas.com>
Date: Fri, 23 Jun 2017 01:21:09 +0700
Subject: [PATCH 06/12] ARM: DTS: r8a7743: add description for wdt0

Signed-off-by: Binh Nguyen <binh.nguyen.uw@rvc.renesas.com>

%% original patch: 0027-ARM-DTS-r8a7743-add-description-for-wdt0.patch
---
 arch/arm/boot/dts/r8a7743.dtsi            | 13 ++++++++++---
 include/dt-bindings/clock/r8a7743-clock.h |  1 +
 2 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/arch/arm/boot/dts/r8a7743.dtsi b/arch/arm/boot/dts/r8a7743.dtsi
index 8667d91..70faa0c 100644
--- a/arch/arm/boot/dts/r8a7743.dtsi
+++ b/arch/arm/boot/dts/r8a7743.dtsi
@@ -84,6 +84,13 @@
 		interrupts = <1 9 (GIC_CPU_MASK_SIMPLE(2) | IRQ_TYPE_LEVEL_HIGH)>;
 	};
 
+	wdt0: watchdog@e6020000 {
+		compatible = "renesas,r8a7743-wdt", "renesas,rcar-gen2-wdt";
+		reg = <0 0xe6020000 0 0x0c>;
+		clocks = <&mstp4_clks R8A7743_CLK_RWDT>;
+		timeout-sec = <60>;
+	};
+
 	gpio0: gpio@e6050000 {
 		compatible = "renesas,gpio-r8a7743", "renesas,gpio-rcar";
 		reg = <0 0xe6050000 0 0x50>;
@@ -1386,10 +1393,10 @@
 		mstp4_clks: mstp4_clks@e6150140 {
 			compatible = "renesas,r8a7743-mstp-clocks", "renesas,cpg-mstp-clocks";
 			reg = <0 0xe6150140 0 4>, <0 0xe615004c 0 4>;
-			clocks = <&cp_clk>;
+			clocks = <&cp_clk>, <&rclk_clk>;
 			#clock-cells = <1>;
-			clock-indices = <R8A7743_CLK_IRQC>;
-			clock-output-names = "irqc";
+			clock-indices = <R8A7743_CLK_IRQC R8A7743_CLK_RWDT>;
+			clock-output-names = "irqc", "wdt0";
 		};
 		mstp5_clks: mstp5_clks@e6150144 {
 			compatible = "renesas,r8a7743-mstp-clocks", "renesas,cpg-mstp-clocks";
diff --git a/include/dt-bindings/clock/r8a7743-clock.h b/include/dt-bindings/clock/r8a7743-clock.h
index da1749a..10fdfab 100644
--- a/include/dt-bindings/clock/r8a7743-clock.h
+++ b/include/dt-bindings/clock/r8a7743-clock.h
@@ -70,6 +70,7 @@
 #define R8A7743_CLK_USBDMAC1		31
 
 /* MSTP4 */
+#define R8A7743_CLK_RWDT		2
 #define R8A7743_CLK_IRQC		7
 
 /* MSTP5 */
-- 
1.9.1

