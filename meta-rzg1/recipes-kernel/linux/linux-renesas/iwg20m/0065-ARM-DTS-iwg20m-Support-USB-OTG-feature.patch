From 6ffba0722471baba32fcf6581092635c7087ff60 Mon Sep 17 00:00:00 2001
From: thongsyho <thong.ho.px@rvc.renesas.com>
Date: Wed, 11 Oct 2017 10:52:14 +0700
Subject: [PATCH 2/2] ARM: DTS: iwg20m: Support USB OTG feature

Both USB Host (pci0) and Function (USBHS) drivers are enabled.
The USB PHY driver determines which IP block should be connected
based on vbus and id signals read via gpios.

Signed-off-by: thongsyho <thong.ho.px@rvc.renesas.com>
---
 arch/arm/boot/dts/r8a7743-iwg20m.dts | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/r8a7743-iwg20m.dts b/arch/arm/boot/dts/r8a7743-iwg20m.dts
index b9c6b06..726e71e 100644
--- a/arch/arm/boot/dts/r8a7743-iwg20m.dts
+++ b/arch/arm/boot/dts/r8a7743-iwg20m.dts
@@ -376,6 +376,10 @@
 
 &usbphy {
 	status = "okay";
+	renesas,id-gpio = <&gpio1 11 GPIO_ACTIVE_LOW>;
+	renesas,vbus-gpio = <&gpio7 24 GPIO_ACTIVE_LOW>;
+	renesas,vbus-pwr-gpio = <&gpio7 23 GPIO_ACTIVE_LOW>;
+	renesas,wakeup;
 };
 
 &xhci {
@@ -384,8 +388,10 @@
 
 &pci0 {
 	status = "okay";
-	pinctrl-0 = <&usb0_pins>;
-	pinctrl-names = "default";
+};
+
+&hsusb {
+	status = "okay";
 };
 
 &qspi {
-- 
1.9.1

