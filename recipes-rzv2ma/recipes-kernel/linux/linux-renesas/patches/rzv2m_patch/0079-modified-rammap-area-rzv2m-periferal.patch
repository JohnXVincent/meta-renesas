From b1efd98c21df61401b22145175c6b4f016c0f89e Mon Sep 17 00:00:00 2001
From: Khai Nguyen <khai.nguyen.wx@renesas.com>
Date: Mon, 14 Mar 2022 08:37:53 +0700
Subject: [PATCH] modified-rammap-area-rzv2m-periferal

Signed-off-by: Khai Nguyen <khai.nguyen.wx@renesas.com>
---
 drivers/usb/gadget/udc/renesas_usb3_rzv2m.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/gadget/udc/renesas_usb3_rzv2m.c b/drivers/usb/gadget/udc/renesas_usb3_rzv2m.c
index 3e8bf86..eebac1a 100644
--- a/drivers/usb/gadget/udc/renesas_usb3_rzv2m.c
+++ b/drivers/usb/gadget/udc/renesas_usb3_rzv2m.c
@@ -263,7 +263,7 @@
 #define USB3_EP0_SS_MAX_PACKET_SIZE	512
 #define USB3_EP0_HSFS_MAX_PACKET_SIZE	64
 #define USB3_EP0_BUF_SIZE		8
-#define USB3_MAX_NUM_PIPES		6	/* This includes PIPE 0 */
+#define USB3_MAX_NUM_PIPES             16      /* This includes PIPE 0 */
 #define USB3_WAIT_US			3
 #define USB3_DMA_NUM_SETTING_AREA	4
 /*
@@ -2718,10 +2718,16 @@ static const struct renesas_usb3_priv renesas_usb3_priv_r8a77990 = {
 	.workaround_for_vbus = true,
 };
 
+static const struct renesas_usb3_priv renesas_usb3_priv_rzv2m = {
+       .ramsize_per_ramif = SZ_32K,
+       .num_ramif = 1,
+       .ramsize_per_pipe = SZ_4K,
+};
+
 static const struct of_device_id usb3_of_match[] = {
 	{
 		.compatible = "renesas,rzv2m-usb3-peri",
-		.data = &renesas_usb3_priv_gen3,
+		.data = &renesas_usb3_priv_rzv2m,
 	},
 	{ },
 };
-- 
2.7.4

